function close(){$("#surprised-2").remove()}var Home={init:function(){this.liveTab(),this.vote(),this.postVideo(),this.setTrackerCode(".preview","https://hs.blizzard.cn/home/previewBtn","新版预览"),this.tab(),this.showMediaControl(),this.setDownLoad(),this.splitMediaRec(),this.setDownLoadTrack(),this.setEsports(),this.setEyes()},sword:function(){var a=document.getElementById("sword"),b=document.getElementById("snow-effects"),c=document.getElementById("sword-glow");if(window.rAF=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),a.addEventListener("transitionend",function(){window.animateSnow(),rAF(window.animateSnow),c.className+="is-glimmering"},!1),!b.getContext||!b.getContext("2d"))return!1;var d=b.getContext("2d"),e=b.clientWidth,f=(b.clientHeight,5),g=e/2-10+10*Math.random(),h=84,i=.17,j=0,k=~~(30*Math.random()+45),l=[],m=h+1,n="rgba(255, 255, 255, 0.8)",o=2*Math.PI;d.fillStyle=n;var p=function(){this.id=j++,this.posX=g,this.posY=h,this.vx=4*Math.random()-2,this.vy=-4*Math.random(),this.radius=Math.random()*f+1,l.push(this),d.beginPath(),d.arc(g,h,this.radius,0,o,!0),d.fill()};p.prototype.draw=function(){var a=this.radius;this.posX+=this.vx,this.posY+=this.vy,this.vy+=i,d.beginPath(),this.posY>=m?(l[this.id]=null,d.clearRect(this.posX-a,this.posY-a,this.posX+a,this.posY+a)):d.arc(this.posX,this.posY,this.radius,0,o,!0),d.fill()};var q=(function r(){new p;j!==k&&r()}(),function s(){d.clearRect(0,0,e,m);for(var a=0,b=l.length;b>a;a+=1){var c=l[a];null!=c&&c.draw()}window.rAF(s)});window.animateSnow=q},setEyes:function(){$("#eye .eye_pic img").imgpreload(function(){$("#eye").hSlider({speed:5e3})})},setEsports:function(){jQuery.ajax({type:"GET",async:!1,url:"https://hearthstone.nosdn.127.net/1/esport/esportJson.json",jsonp:"callback",jsonpCallback:"esportJson",dataType:"jsonp",success:function(a){var b="";if(0==a.length)return void $(".esport").hide();for(var c=0;c<a.length;c++)b+='<li class="esportItem"><a class="img" href="'+a[c].link+'" target="_blank"><span class="esportBg"><img width="244" src="'+a[c].imgBackground+'"/></span><span class="esportCont"><img src="'+a[c].imgMain+'"/></span><span class="esportTit">'+a[c].title+"</span></a></li>";$(".esport .eye_pic").html(b),$(".esport").hSlider({speed:5e3}),a.length>1&&$(".esport .prev,.esport .next").show();var d=~navigator.userAgent.indexOf("MSIE 7.0");d&&$(".esport .img").click(function(){return window.open($(this).attr("href")),!1})}})},setVideoUrl:function(){jQuery.ajax({type:"GET",async:!1,url:"https://hearthstone.nosdn.127.net/1/jsfiles/home_video.json",jsonp:"callback",jsonpCallback:"videossJson",dataType:"jsonp",success:function(a){var b=["{@each video as item,index}",'<a href="${item.link}" class="playBtn" target="_blank"></a>','<img src="${item.src}" alt="">','<span class="over"></span>','<span class="textLine">${item.title}</span>',"{@/each}"].join(""),c=juicer(b,a);$(".videoBox").append(c)}})},splitMediaRec:function(){for(var a=$(".mTitle"),b=0;b<a.length;b++){var c=a.eq(b).html().substring(0,13);a.eq(b).html(c)}},setCaidanFlash:function(){var a=10*Math.random();10>a&&(Common.addFlash("/swf/naonao_180x160.swf","surprised-1",160,120),Common.addFlash("/swf/naonao_1680x1000.swf","surprised-2",1680,1e3),$("#headerFlash").remove(),$("#surprisedBtn").show(),$("#surprisedBtn").click(function(){function a(a){return-1!=navigator.appName.indexOf("Microsoft")?window[a]:document[a]}function b(b){a("surprised-2").dogame(b)}$("#surprised-1").remove(),$("#surprised-2").css("right","-340px"),$(this).remove(),b()}))},setDownLoad:function(){var a=$(".downloadBtn"),b=$(".clientDownload");$(".pc").click(function(){var c=$(this).attr("data-url"),d=$("#flashBox");a.removeClass("ios android"),b.attr({href:c,"class":"clientDownload pcClient"}),$(this).addClass("active").parent().siblings("li").find("a").removeClass("active"),Common.isMobile()||d.show()}),$(".ios").click(function(){var c=$(this).attr("data-url"),d=$("#flashBox");d.hide(),a.removeClass("ios android").addClass("ios"),b.attr({href:c,"class":"clientDownload iosClient"}),$(this).addClass("active").parent().siblings("li").find("a").removeClass("active")}),$(".android").click(function(){var c=$(this).attr("data-url"),d=$("#flashBox");d.hide(),a.removeClass("ios android").addClass("android"),b.attr({href:c,"class":"clientDownload androidClient"}),$(this).addClass("active").parent().siblings("li").find("a").removeClass("active")})},setDownLoadTrack:function(){var a=$(".clientDownload");a.click(function(){$(this).hasClass("pcClient")?neteaseTracker(!1,"https://hs.blizzard.cn/home/pcclient","PC版客户端下载","hs9click"):$(this).hasClass("iosClient")?neteaseTracker(!1,"https://hs.blizzard.cn/home/iosclient","IOS版客户端下载","hs9click"):$(this).hasClass("androidClient")&&neteaseTracker(!1,"https://hs.blizzard.cn/home/androidclient","Android版客户端下载","hs9click")})},setTrackerCode:function(a,b,c){$(a).click(function(){neteaseTracker(!1,b,c,"hs9click")})},setModuleOrder:function(){var a=$.cookie("module_custom");if(null!=a)for(var b=a.split(","),c=0;c<b.length;c++){var d=$(".module_"+b[c]);$(".dragWrapper").append(d)}var e=$(".rightModule");e.hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});var f=$(".indicator");$(".rightModule").draggable({revert:!0,deltaX:0,deltaY:0,axis:"v",handle:".dragBtn",onStartDrag:function(){f.show().css("border-width",0),f.height($(this).height()),$(this).before(f),$(this).addClass("focus")},onDrag:function(){f.css("border-width",1)},onStopDrag:function(){f.hide(),$(this).removeClass("focus")}}),$(".rightModule").droppable({onDragOver:function(){f.show();var a=$(this).next();a.hasClass("indicator")?$(this).before(f):$(this).after(f)}}),$(".indicator").droppable({onDrop:function(a,b){$(b).insertAfter(this),f.hide(),setTimeout(function(){var a=$(".rightModule,.rightModule-normal"),b=[];a.each(function(a,c){var d=$(c).attr("rel");b.push(d)}),$.cookie("module_custom",b.join(","),{expires:30})},500)}})},joiner:function(){$(".joiner").find("li:gt(11)").hide(),$(".joiner .more").click(function(){$(this).find("span").toggleClass("active"),"none"==$(".joiner").find("li:gt(11)").css("display")?$(".joiner").find("li:gt(11)").show():$(".joiner").find("li:gt(11)").hide()})},liveTab:function(){var a=$(".liveBox .liveTab");a.click(function(){var a=$(this).attr("rel");return $(this).addClass("btn_yellow").siblings(".liveTab").removeClass("btn_yellow"),$('div[class="'+a+'"]').show().siblings().hide(),!1})},vote:function(){var a=($("#nvt-bar-btn-v25880"),$("#nvt-bar-form-v25880"),$(".nvt_vote_list dd"));a.hover(function(){$(this).addClass("yellowAlphaBg")},function(){$(this).removeClass("yellowAlphaBg")}),a.click(function(){$(this).find("input").attr("checked","checked")})},videoShow:function(){var a=$("#mainBtn");a.click(function(){var a=Common.videoWrap("http://v.163.com/swf/video/NetEaseFlvPlayerV3.swf",960,520,"pltype=7&topicid=0031&vid=V92ASRO93&sid=V6FERU4MT&coverpic=http://vimg1.ws.126.net/image/snapshot/2013/7/9/4/V92ASRO94.jpg&autoplay=false&showend=false&hiddenR=true"),b=Common.getBoxwrap();b[3]=a,Common.isIOS()&&(b[3]=Common.showIosVideo("http://file.ws.126.net/game/hs/movie/cg.mp4")),$.sc2.lightBox(b.join(""),{model:!0,hasClose:!1})})},postVideo:function(){var a=$(".postVideo");a.click(function(){var a="<div class='postVideoCon'><p class='padB'>如果您有《炉石传说》直播或相关视频想通过官网与玩家分享，可以发信至 hs@battlenet.com.cn 与我们取得联系。请在信中尽可能详细的包含以下内容：</p><p><span class='title'>邮件标题：</span>直播/视频/解说（根据类型选择） - 作者名/媒体名。</p><p><span class='title'>发布时间：</span>直播起/始时间或视频发布时间。</p><p><span class='title'>直播标题：</span>直播或视频的名称，例“XXX 竞技场战士实战讲解”。</p><p><span class='title'>视频地址：</span>直播或视频的网页地址链接。</p><p><span class='title'>联系方式：</span>可以联系到您的有效联系方式，例如QQ、EMAIL等。</p><p class='padB'><span class='title'>其他说明：</span>推荐内容必须为原创内容；如有可能，请提供作者或媒体专栏简介；如您需要我们进行视频上传，请提供视频源文件下载地址。</p><p>经审核后，我们将会在官网进行推荐！</p></div>",b=Common.setBoxwrap("500px","300px",a);$.sc2.lightBox(b,{model:!0,hasClose:!1})})},setHero:function(){jQuery.ajax({type:"GET",async:!1,url:"https://hearthstone.nosdn.127.net/1/files/heroJson.json",jsonp:"callback",jsonpCallback:"heroJson",dataType:"jsonp",success:function(a){var b=a.title,c=['<li class="two">'+a.second+"</li>",'<li class="one">'+a.first+"</li>",'<li class="three">'+a.third+"</li>"].join("");$(".heroTitle strong").html(b),$(".module_hero ul").html(c)}})},setFlash:function(){Common.isTouch()?($(".ipadSwfBtn").show(),$(".pcSwfBtn").hide()):($(".reg_link").show(),$(".pc_link").show(),$(".ipad_link").show(),$(".switch_bg").show()),$(".pc_link").click(function(){$(".ipadSwfBtn").hide(),$(".pcSwfBtn").show()}),$(".ipad_link").click(function(){$(".ipadSwfBtn").show(),$(".pcSwfBtn").hide()})},tab:function(){$(".tab").each(function(){var a=$(this);a.find(".menu li").mouseover(function(){$(this).addClass("on").siblings().removeClass("on"),a.find(".tab-con").eq($(this).index()).show().siblings(".tab-con").hide()})})},getVideo:function(){jQuery.ajax({type:"GET",async:!1,url:"https://hearthstone.nosdn.127.net/1/news/201405/rightVideo.json",jsonp:"callback",jsonpCallback:"homeVideoJson",dataType:"jsonp",success:function(a){for(var b="",c=0;c<a.length;c++)b+=["<li>",'<div class="media_video_w" rel="video">','<a class="media_video_s" href="'+a[c].url+'" target="_blank">','<img src="'+a[c].imgUrl+'" width="130" height="77" alt="">','<span class="dot5"></span>','<span class="video_btn"></span>',"</a>","</div>",'<p class="video-info">','<a href="'+a[c].url+'" target="_blank">'+a[c].titleV+"</a>","<span>"+a[c].timeV+"</span>","</p>","</li>"].join("");$("#videoList ul").html(b);var d=setInterval(Home.rightVideo,5e3);$("#videoList").hover(function(){clearInterval(d)},function(){d=setInterval(Home.rightVideo,5e3)})}})},rightVideo:function(){var a=$("#videoList ul"),b=Math.abs(parseInt(a.css("top"))),c=parseInt(a.children("li").height())+parseInt(a.children("li").css("padding-top"))+parseInt(a.children("li").css("padding-bottom")),d=c*a.children("li").length;a.height(d+"px"),b+c>=d?a.stop(!0,!0).animate({top:"0px"},1500,"easeOutExpo"):a.stop(!0,!0).animate({top:-(b+c)+"px"},1500,"easeOutExpo")},showMediaControl:function(){$(".communityJoinMedia").hover(function(){$(".prev,.next").show()},function(){$(".prev,.next").hide()})}};with(window._bd_share_config={common:{bdText:"暴雪首款免费游戏-PC/iOS双平台休闲卡牌大作《炉石传说》即将开测！无论你是魔兽粉，暴雪粉还是卡牌粉，如此精彩岂容错过？登录官网预约测试资格 hs.blizzard.cn",bdPic:"http://nos.netease.com/blz/1/hs/weibo/weibo.jpg"},share:[{bdSize:16}]},document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="https://fs.bnet.163.com/js/??vendor/share_bd/static/api/js/share.js?cdnversion="+~(-new Date/36e5)];